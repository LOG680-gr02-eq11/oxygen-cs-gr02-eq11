#name: CI pipeline
#
#on: push
#
#jobs:
#  test:
#    runs-on: ubuntu-latest
#    steps:
#      - name: Checkout repository
#        uses: actions/checkout@v2
#
#      - name: Set up Python
#        uses: actions/setup-python@v2
#        with:
#          python-version: 3.8  # replace with your Python version
#
#      - name: Install dependencies
#        run: |
#          python -m pip install --upgrade pip
#          pip install pipenv
#          pipenv install --dev
#
#      - name: Run tests
#        run: pipenv run pytest  # replace with your test command
#
#  static-analysis:
#    needs: test
#    runs-on: ubuntu-latest
#    steps:
#      - name: Checkout repository
#        uses: actions/checkout@v2
#
#      - name: Set up Python
#        uses: actions/setup-python@v2
#        with:
#          python-version: 3.8
#
#      - name: Install dependencies
#        run: |
#          python -m pip install --upgrade pip
#          pip install pipenv
#          pipenv install --dev
#
#      - name: Run static analysis
#      # black just checks that formatting is respected but wont reformat
#      # bandit -r is for recursivity
#        run: |
#          pipenv run flake8
#          pipenv run black --check .
#          pipenv run bandit -r -c bandit.yaml .
#
#  build-and-push-docker-image:
#    needs: static-analysis
#    runs-on: ubuntu-latest
#    if: github.ref == 'refs/heads/main'
#    steps:
#      - name: Checkout repository
#        uses: actions/checkout@v2
#
#      - name: Log in to Docker Hub
#        uses: docker/login-action@v1
#        with:
#          username: ${{ secrets.DOCKERHUB_USERNAME }}
#          password: ${{ secrets.DOCKERHUB_TOKEN }}
#
#      - name: Build and push Docker image
#        uses: docker/build-push-action@v2
#        with:
#          context: .
#          push: true
#          tags: |
#            oxygencsequipe11/oxygen-cs:latest
#             oxygencsequipe11/oxygen-cs:${{ github.run_id }}